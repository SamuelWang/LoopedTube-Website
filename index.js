(function(a){a(function(){var c=a("#header");a(".header-funcs",c).on("click",".button",function(){var d=a(this),e=d.attr("data-func");d.siblings(".active").removeClass("active");c.find(".search-wrapper").hide(400,"linear");loopedtube.toggleButtonActive(d,function(){a("#"+e+"box",c).show(400,"linear").find("input").focus()},function(){a("#"+e+"box",c).hide(400,"linear")})});a(".search-wrapper",c).on("keyup",function(d){var e=a(this),b=e.find("input"),f=b.val(),e=e.attr("id");if(13===d.which)switch(e){case "keybox":(d=
loopedtube.parseVideoId(f))&&d.id?(History.pushState({video:d},"","?video="+d.id),b.val(""),a("#btn"+e.replace("box",""),c).click()):(loopedtube.showMessage("\u8acb\u8f38\u5165\u6b63\u78ba\u7684\u5f71\u7247ID\u6216\u5f71\u7247\u7db2\u5740","warning"),b.focus());break;case "searchbox":History.pushState({query:f},"","?search="+encodeURIComponent(f)),b.val(f),a("#btn"+e.replace("box",""),c).click()}});a(window).on("resize",function(){var a=document.documentElement.clientWidth,b=853,c=480;768>a&&(b=320,
c=240);768<=a&&1024>a&&(b=640,c=360);1800<=a&&(b=1280,c=720);loopedtube.player&&loopedtube.player.setSize(b,c)});a.getScript("https://www.youtube.com/iframe_api");loopedtube.loadYouTubeAPIStatus=1;if(location.search){var b=location.search.substring(1).split("&"),b=b.map(function(a){var b={};a=a.split("=");b.key=a[0];b.value=a[1];return b});"video"===b[0].key?((b=loopedtube.parseVideoId(b[0].value))&&b.id&&(loopedtube.cuedVideo=b),loopedtube.loadFunc("video")):"search"===b[0].key&&(History.replaceState({query:decodeURIComponent(b[0].value)},
"","?search="+b[0].value),History.Adapter.trigger(window,"statechange"))}else loopedtube.loadFunc("video")})})(jQuery);History.Adapter.bind(window,"statechange",function(){var a=History.getState().data;a.video?(a=a.video,loopedtube.currentVideo&&a.id===loopedtube.currentVideo.id?loopedtube.player.seekTo(loopedtube.currentVideo.startTime):loopedtube.cuedVideo=a,loopedtube.loadFunc("video",function(){loopedtube.cueVideo()})):a.query&&loopedtube.loadFunc("search",function(){$("#btnmore").click()})});
function onPlayerReady(){loopedtube.player.addEventListener("onStateChange",function(a){var c=a.data,b=$("#time-interval");a=$("#starttime",b);b=$("#endtime",b);switch(c){case YT.PlayerState.ENDED:loopedtube.isLoop?(loopedtube.cued=!0,loopedtube.player.playVideo()):loopedtube.stopWatchCurrentTime();break;case YT.PlayerState.PLAYING:var c=loopedtube.player.getDuration(),d=$.timeToSecond(a.val()),e=$.timeToSecond(b.val());loopedtube.cued&&(a.removeAttr("disabled"),0<d&&loopedtube.player.seekTo(d),c&&
0===e?(loopedtube.currentVideo.duration=c,$("#endtime","#time-interval").val($.secondToTime(c)),b.removeAttr("disabled")):0!==e&&b.removeAttr("disabled"),loopedtube.cued=!1,loopedtube.startWatchCurrentTime(),loopedtube.addRecentVideo(loopedtube.currentVideo,function(a){loopedtube.renderVideoList($("#recent-list"),a,!0)}));break;case YT.PlayerState.PAUSED:loopedtube.stopWatchCurrentTime();break;case YT.PlayerState.CUED:d=loopedtube.cuedVideo.startTime?loopedtube.cuedVideo.startTime:0,e=loopedtube.cuedVideo.endTime?
loopedtube.cuedVideo.endTime:0,a.val($.secondToTime(d)),b.val($.secondToTime(e)),a.attr("disabled","disabled"),b.attr("disabled","disabled"),loopedtube.currentVideo=loopedtube.cuedVideo,loopedtube.cued=!0,loopedtube.player.playVideo()}});loopedtube.player.addEventListener("onError",function(a){switch(a.data){case 2:loopedtube.showMessage("\u672a\u77e5\u7684\u5f71\u97f3ID\u3002","error");break;case 5:loopedtube.showMessage("\u64ad\u653e\u5668\u767c\u751f\u672a\u77e5\u932f\u8aa4\u3002","error");break;
case 100:loopedtube.showMessage("\u6b64\u5f71\u97f3\u53ef\u80fd\u5df2\u88ab\u522a\u9664\u6216\u662f\u70ba\u79c1\u4eba\u5f71\u97f3\u3002","error");break;case 101:loopedtube.showMessage("\u5f71\u97f3\u64c1\u6709\u8005\u4e0d\u5141\u8a31\u6b64\u5f71\u97f3\u5728YouTube\u7db2\u7ad9\u4ee5\u5916\u88ab\u64ad\u653e\u3002","error")}});loopedtube.loadPlayerStatus=2;loopedtube.cuedVideo&&loopedtube.cueVideo()}
function onYouTubeIframeAPIReady(){loopedtube.loadYouTubeAPIStatus=2;loopedtube.cuedVideo&&loopedtube.cueVideo()};